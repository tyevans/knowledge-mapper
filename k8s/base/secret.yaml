# Secret Template for Knowledge Mapper
#
# DO NOT COMMIT ACTUAL SECRET VALUES TO VERSION CONTROL!
#
# This file serves as a template showing the required secret keys.
# The placeholder values are intentionally invalid to prevent accidental use.
#
# =============================================================================
# CREATE SECRETS MANUALLY
# =============================================================================
#
# Option 1: kubectl create secret (recommended for development)
#
#   kubectl create secret generic knowledge-mapper-secrets \
#     --namespace knowledge-mapper \
#     --from-literal=DATABASE_URL='postgresql+asyncpg://user:password@host:5432/db' \
#     --from-literal=REDIS_URL='redis://default:password@host:6379/0' \
#     --from-literal=MIGRATION_DATABASE_URL='postgresql+asyncpg://migrator:password@host:5432/db'
#
# Option 2: kubectl create secret from file
#
#   kubectl create secret generic knowledge-mapper-secrets \
#     --namespace knowledge-mapper \
#     --from-env-file=secrets.env
#
# =============================================================================
# EXTERNAL SECRET MANAGEMENT (recommended for production)
# =============================================================================
#
# Consider using one of these solutions:
#
# - Sealed Secrets: https://github.com/bitnami-labs/sealed-secrets
#   Encrypts secrets for safe git storage
#
# - External Secrets Operator: https://external-secrets.io/
#   Syncs secrets from AWS Secrets Manager, Vault, GCP Secret Manager, etc.
#
# - HashiCorp Vault: https://www.vaultproject.io/
#   Full secrets management with dynamic credentials
#
# - SOPS: https://github.com/getsops/sops
#   Encrypted file storage with multiple KMS backends
#
# =============================================================================

apiVersion: v1
kind: Secret
metadata:
  name: knowledge-mapper-secrets
  labels:
    app.kubernetes.io/name: knowledge-mapper
    app.kubernetes.io/component: secrets
  annotations:
    # Marker to indicate this is a template, not a real secret
    template: "true"
    description: "Replace placeholder values before deployment"
type: Opaque
stringData:
  # =============================================================================
  # Database Configuration
  # =============================================================================

  # Application database URL (uses app_user - RLS policies enforced)
  # Format: postgresql+asyncpg://user:password@host:port/database
  DATABASE_URL: "REPLACE_WITH_ACTUAL_DATABASE_URL"

  # Migration database URL (uses migration_user - BYPASSRLS for schema changes)
  # Format: postgresql+asyncpg://migrator:password@host:port/database
  MIGRATION_DATABASE_URL: "REPLACE_WITH_MIGRATION_DATABASE_URL"

  # =============================================================================
  # Redis Configuration
  # =============================================================================

  # Redis connection string for caching and sessions
  # Format: redis://default:password@host:port/db
  REDIS_URL: "REPLACE_WITH_ACTUAL_REDIS_URL"

