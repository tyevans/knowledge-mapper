# Application Configuration
APP_NAME="Knowledge Mapper"
APP_VERSION="0.1.0"
DEBUG=true

# API Configuration
API_V1_PREFIX="/api/v1"

# CORS Configuration
CORS_ORIGINS="http://localhost:3000,http://localhost:5173"
CORS_ALLOW_CREDENTIALS=true

# Database Configuration
# Multi-Tenancy Mode: Separate users for RLS enforcement
# Application runtime database URL (uses knowledge_mapper_app_user - NO BYPASSRLS, RLS policies enforced)
DATABASE_URL="postgresql+asyncpg://knowledge_mapper_app_user:app_password_dev@postgres:5435/knowledge_mapper_db"

# Migration database URL (uses knowledge_mapper_migration_user - with BYPASSRLS for schema management)
MIGRATION_DATABASE_URL="postgresql+asyncpg://knowledge_mapper_migration_user:migration_password_dev@postgres:5435/knowledge_mapper_db"

# Multi-Tenancy Settings
TENANT_CLAIM_NAME="tenant_id"
REQUIRE_TENANT_CLAIM=true

# Server Configuration
HOST="0.0.0.0"
PORT=8000
RELOAD=true

# Keycloak OAuth Provider Configuration
KEYCLOAK_PORT=8080
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin

# OpenTelemetry Configuration (Observability)
# Service name for traces (identifies service in Tempo/Grafana)
OTEL_SERVICE_NAME=backend
# OTLP endpoint for trace export (Tempo gRPC endpoint)
OTEL_EXPORTER_OTLP_ENDPOINT=http://tempo:4317

# =============================================================================
# Security Headers Configuration (P2-02)
# =============================================================================
# Master toggle - set to false to disable all security headers
SECURITY_HEADERS_ENABLED=true

# Content-Security-Policy (CSP)
# Note: 'unsafe-inline' is required for Lit web components
CSP_ENABLED=true
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self' 'unsafe-inline'
CSP_STYLE_SRC='self' 'unsafe-inline'
CSP_IMG_SRC='self' data: https:
CSP_FONT_SRC='self'
CSP_CONNECT_SRC='self'
CSP_FRAME_ANCESTORS='none'
CSP_BASE_URI='self'
CSP_FORM_ACTION='self'
# CSP_REPORT_URI=https://your-domain.report-uri.com/csp-report

# Strict-Transport-Security (HSTS)
# Only applied for HTTPS connections
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=false

# Other Security Headers
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
REFERRER_POLICY=strict-origin-when-cross-origin
PERMISSIONS_POLICY=accelerometer=(), camera=(), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), payment=(), usb=()
X_XSS_PROTECTION=1; mode=block
