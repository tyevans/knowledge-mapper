# Test Environment Configuration
# This file is used by pytest for integration tests
# These tests run INSIDE Docker containers, so use internal container ports (not host-mapped ports)

# Database Configuration - Points to PostgreSQL via Docker network
# Use migration user for tests since tests need BYPASSRLS to set up test data and verify RLS policies
# Note: Use port 5432 (internal container port), not 5435 (host-mapped port)
DATABASE_URL=postgresql+asyncpg://knowledge_mapper_migration_user:migration_password_dev@postgres:5432/knowledge_mapper_db
MIGRATION_DATABASE_URL=postgresql+asyncpg://knowledge_mapper_migration_user:migration_password_dev@postgres:5432/knowledge_mapper_db

# Redis Configuration - Points to Redis via Docker network
# Note: Use port 6379 (internal container port), not 6379 (host-mapped port)
REDIS_URL=redis://default:knowledge_mapper_redis_pass@redis:6379/0

# OAuth Configuration (uses keycloak service name for Docker network)
# Note: Use port 8080 (internal container port), not 8080 (host-mapped port)
OAUTH_ISSUER_URL=http://keycloak:8080/realms/knowledge-mapper-dev
OAUTH_AUDIENCE=knowledge-mapper-backend
OAUTH_ALGORITHMS=["RS256"]

# Disable rate limiting for tests
RATE_LIMIT_ENABLED=false

# Debug mode
DEBUG=true
